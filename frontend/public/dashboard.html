<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>WEBPORTALHUB: Your Online Destination for Dynamic Dashboards and Reports</title>
    <!-- CSS Link -->
    <link rel="stylesheet" href="/frontend/public/styles.css" />

    <!-- Favicons -->
    <link href="/frontend/images/site_logo.png" rel="icon">

    <!-- Box Icon Link for Icons -->
    <link href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css" rel="stylesheet" />
    <style>
        .search-container {
            position: relative;
            width: 100%;
            max-width: 400px;
            margin: 0 auto 20px;
        }

        .search-container i {
            position: absolute;
            top: 50%;
            right: 15px;
            transform: translateY(-50%);
            color: #f3961c;
        }

        #searchInput {
            width: 100%;
            padding-left: 30px;
            font-size: 16px;
            border: 1px solid #252525;
            border-radius: 5px;
            height: 36px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            color: #fff;
        }

        table,
        th,
        td {
            border: 1px solid #ddd;
        }

        th,
        td {
            padding: 10px;
            text-align: left;
        }

        th {
            background-color: #252525;
        }

        td[contenteditable="true"] {
            background-color: #fff3e0;
        }


        @media (max-width: 768px) {

            .search-container {
                width: 90%;
            }

            #searchInput {
                width: 100%;
                font-size: 14px;
            }

            table {
                font-size: 14px;
            }

        }

        @media (max-width: 576px) {

            .search-container {
                width: 100%;
            }

            #searchInput {
                height: 32px;
            }

            table,
            th,
            td {
                font-size: 12px;
                padding: 5px;
            }
        }
    </style>
</head>

<body>
    <!-- Header & Navbar Section -->
    <header>
        <nav>
            <div class="nav_logo">
                <a href="index.html">
                    <img src="/frontend/images/logo.png" alt="Logo" />
                </a>
            </div>

            <input type="checkbox" id="click" />
            <label for="click">
                <i class="menu_btn bx bx-menu"></i>
                <i class="close_btn bx bx-x"></i>
            </label>

            <ul>
                <li><a href="index.html">Home</a></li>
                <li><a class="active" href="dashboard.html">Dashboard</a></li>
                <li><a href="forms.html">Forms</a></li>
                <li><a href="reports.html">Reports</a></li>
                <li><a href="login.html">Accounts</a></li>
                <li><a href="contact.html">Contact</a></li>
            </ul>
        </nav>
    </header>
    <div class="row">
        <div class="column" style="background-color:#aaa;">
            <h2>Sanctioned cost in (Cr.)</h2>
            <button type="button" class="button">a. &gt; 30cr.</button>
            <button type="button" class="btn">b. 2-30cr.</button>
            <button type="button" class="btn">c. &lt;2cr.</button>
            <button type="button" class="btn clear-filter-button">Clear Filter</button>
        </div>
        <div class="column" style="background-color:#bbb;">
            <h2>SCHEME TYPE- APPROVED</h2>
            <button type="button" class="button">a. Corporate.</button>
            <button type="button" class="btn btn-secondary">b. Plant Level.</button>
            <button type="button" class="btn btn-secondary">c. MEP.</button>
            <button type="button" class="btn btn-secondary">d. Cr.</button>
            <button type="button" class="clear-filter-button">Clear Filter</button>
        </div>
    </div>


    <div class="row">
        <div class="column" style="background-color:#ccc;">
            <h2>IPM-MM (DO):</h2><br>
            <button type="button" class="btn btn-secondary filter-button">Aditi Sur</button>
            <button type="button" class="btn btn-secondary filter-button">K A Krishna</button>
            <button type="button" class="btn btn-secondary filter-button">R K Vyas</button>
            <button type="button" class="btn btn-secondary filter-button">S Chatterjee</button>
            <button type="button" class="btn btn-secondary filter-button">Blank</button>
            <button type="button" class="btn btn-secondary filter-button">Other</button>
            <button type="button" class="clear-filter-button">Clear Filter</button>

        </div>
        <div class="column" style="background-color:#ddd;">
            <h2>CURRENT STATUS:</h2>
            <div class="scrollable-menu">
                <button type="button" class="btn btn-secondary filter-button">Closed</button>
                <button type="button" class="btn btn-secondary filter-button">Completed</button>
                <button type="button" class="btn btn-secondary filter-button">Ongoing</button>
                <button type="button" class="btn btn-secondary filter-button">Under Tendering</button>
                <button type="button" class="btn btn-secondary filter-button">Under Stage-II approval</button>
                <button type="button" class="btn btn-secondary filter-button">Under Stage-II PAG</button>
                <button type="button" class="btn btn-secondary filter-button">Under Stage-I approval</button>
                <button type="button" class="btn btn-secondary filter-button">Under Stage-I PAG</button>
                <button type="button" class="btn btn-secondary filter-button">Under Formulation</button>
                <button type="button" class="btn btn-secondary filter-button">Dropped / Cancelled</button>
                <button type="button" class="btn btn-secondary filter-button">Capital Repair / Spares</button>
            </div><br>
            <button type="button" class="clear-filter-button">Clear Filter</button>
        </div>
    </div>

    <div class="row" style="background-color:#aaa; padding: 20px;">
        <div class="column">
            <h2>Project ID:</h2>
            <div class="scrollable-menu">
                <button type="button" class="btn btn-secondary">B.8.18</button>
                <button type="button" class="btn btn-secondary">B.8.23</button>
                <button type="button" class="btn btn-secondary">B.8.24</button>
                <button type="button" class="btn btn-secondary">B.8.25</button>
                <button type="button" class="btn btn-secondary">B.8.26</button>
                <button type="button" class="btn btn-secondary">B.8.29</button>
                <button type="button" class="btn btn-secondary">B.8.30</button>
                <button type="button" class="btn btn-secondary">B.8.32</button>
            </div><br>
            <button type="button" class="clear-filter-button">Clear Filter</button>
        </div>
        <div class="column" style="background-color:#bbb;">
            <h2>Project Manager :</h2>
            <div class="scrollable-menu">
                <button type="button" class="btn btn-secondary">C S Pant</button>
                <button type="button" class="btn btn-secondary">Kailash Chand</button>
                <button type="button" class="btn btn-secondary">Medical Org</button>
                <button type="button" class="btn btn-secondary">Misc</button>
                <button type="button" class="btn btn-secondary">P K Singh</button>
                <button type="button" class="btn btn-secondary">P K Sinha</button>
                <button type="button" class="btn btn-secondary">Sanjay Kar</button>
                <button type="button" class="btn btn-secondary">Satish Kumar</button>

            </div><br>

            <button type="button" class="clear-filter-button">Clear Filter</button>
        </div>
    </div>

    <div class="row" style="background-color:#ccc;">
        <div class="column">
            <h2>Department :</h2>
            <div class="scrollable-menu">
                <button type="button" class="btn btn-secondary">BF</button>
                <button type="button" class="btn btn-secondary">CEM</button>
                <button type="button" class="btn btn-secondary">COCC</button>
                <button type="button" class="btn btn-secondary">DD</button>
                <button type="button" class="btn btn-secondary">EMD</button>
                <button type="button" class="btn btn-secondary">ERS</button>
                <button type="button" class="btn btn-secondary">M &HS</button>
                <button type="button" class="btn btn-secondary">M ISC</button>
                <button type="button" class="btn btn-secondary">MM</button>
                <button type="button" class="btn btn-secondary">OXYPL</button>
                <button type="button" class="btn btn-secondary">PERS</button>
                <button type="button" class="btn btn-secondary">PG</button>
                <button type="button" class="btn btn-secondary">PMD</button>
                <button type="button" class="btn btn-secondary">PP</button>
                <button type="button" class="btn btn-secondary">PROJ</button>
                <button type="button" class="btn btn-secondary">RCL</button>
                <button type="button" class="btn btn-secondary">RM HP</button>
                <button type="button" class="btn btn-secondary">ROLLSHOP</button>
                <button type="button" class="btn btn-secondary">SMS</button>
                <button type="button" class="btn btn-secondary">TS</button>
                <button type="button" class="btn btn-secondary">WAP</button>
                <button type="button" class="btn btn-secondary">ACVS</button>
                <button type="button" class="btn btn-secondary">C&IT</button>
                <button type="button" class="btn btn-secondary">ECD</button>
                <button type="button" class="btn btn-secondary">FIRE</button>
                <button type="button" class="btn btn-secondary">HM</button>
                <button type="button" class="btn btn-secondary">INFRA</button>
                <button type="button" class="btn btn-secondary">INSTT.</button>
                <button type="button" class="btn btn-secondary">MSM</button>
                <button type="button" class="btn btn-secondary">NLCP</button>
                <button type="button" class="btn btn-secondary">PCE</button>
                <button type="button" class="btn btn-secondary">SP</button>
                <button type="button" class="btn btn-secondary">SPU</button>
                <button type="button" class="btn btn-secondary">TELECOM</button>
                <button type="button" class="btn btn-secondary">TRAFFIC</button>
                <button type="button" class="btn btn-secondary">WMD</button>
                <button type="button" class="btn btn-secondary">WRS</button>
                <button type="button" class="btn btn-secondary">(BLANK)</button>
            </div><br>

            <button type="button" class="clear-filter-button">Clear Filter</button>
        </div>
    </div>

    <div class="container"><br><br>
        <div class="search-container">
            <i class='bx bx-search-alt-2'></i>
            <input type="text" id="searchInput" onkeyup="myFunction()" placeholder="Search for data...">
        </div>
        <table id="dataTable">
            <thead>
                <tr>
                    <th>SL. (FY2023-24)</th>
                    <th>SL. (FY2022-23)</th>
                    <th>WBS Element IPM-F&A</th>
                    <th>PROJECT ID</th>
                    <th>Scheme Name</th>
                    <th>Sanctioned Cost (INR / Crs)</th>
                    <th>Anticipated Cost (INR / Crs)</th>
                    <th>IPM-MM (DO)</th>
                    <th>Dept</th>
                    <th>PROJ MGR</th>
                    <th>CURRENT STATUS</th>
                    <th>SCHEME TYPE</th>
                    <th>Stage-I Plant PAG Date</th>
                    <th>Stage-I Approval Date</th>
                    <th>Stage-I Cost (Gross Rs Cr)</th>
                    <th>Stage-I Cost (Net Rs Cr)</th>
                    <th>Time taken in Stage-I Approval</th>
                    <th>Stage-I PAG (Qtr/FY)</th>
                    <th>Stage-I Approval (Qtr/FY)</th>
                    <th>Stage-I Approval Trend</th>
                    <th>Award Trend from NIT</th>
                    <th>Stage-II PAG Trend</th>
                    <th>Award Trend from Stage-II Approval</th>
                    <th>Project Delay Trend</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                <!-- Data will be inserted here dynamically -->
            </tbody>
        </table>
    </div>


    <script>

        // Get the elements with class="column"
        var elements = document.getElementsByClassName("column");

        // Declare a loop variable
        var i;

        // List View
        function listView() {
            for (i = 0; i < elements.length; i++) {
                elements[i].style.width = "100%";
            }
        }

        // Grid View
        function gridView() {
            for (i = 0; i < elements.length; i++) {
                elements[i].style.width = "50%";
            }
        }

        document.addEventListener("DOMContentLoaded", function () {
            fetchFormData();

            function fetchFormData() {
                fetch('http://localhost:5000/api/form_data')
                    .then(response => response.json())
                    .then(data => {
                        displayFormData(data);
                    })
                    .catch(error => console.error('Error fetching form data:', error));
            }

            function displayFormData(form_data) {
                const tbody = document.querySelector('#dataTable tbody');
                tbody.innerHTML = '';
                form_data.forEach(data => {
                    const tr = document.createElement('tr');
                    tr.innerHTML = `
                <td>${data.Sl1}</td>
                <td>${data.previousSl1}</td>
                <td>${data.wbsElement}</td>
                <td>${data.projectId}</td>
                <td>${data.schemeName}</td>
                <td>${data.sanctionedCost}</td>
                <td>${data.anticipatedCost}</td>
                <td>${data.ipmm}</td>
                <td>${data.dept}</td>
                <td>${data.proj_mgr}</td>
                <td>${data.current_status}</td>
                <td>${data.scheme_type}</td>
                <td>${data.stage1_approval}</td>
                <td>${data.stage1_approvaldate}</td>
                <td>${data.stage1_cost_gross}</td>
                <td>${data.stage1_cost_net}</td>
                <td>${data.stage1_approval_time}</td>
                <td>${data.stage1_pag_qtr}</td>
                <td>${data.stage1_approval_qtr}</td>
                <td>${data.stage1_approval_trend}</td>
                <td>${data.award_trend_nit}</td>
                <td>${data.stage2_pag_trend}</td>
                <td>${data.award_trend_stage2}</td>
                <td>${data.project_delay_trend}</td>
                <td>
                    <button onclick="updateUser(${data.id})" style="background-color: #007bff; color: #fff; border: none; padding: 8px 16px; cursor: pointer; border-radius: 4px;">Update</button>
                    <button onclick="deleteUser(${data.id})" style="background-color: #dc3545; color: #fff; border: none; padding: 8px 16px; cursor: pointer; border-radius: 4px;">Delete</button>
                </td>
            `;
                    tbody.appendChild(tr);
                });
            }

            function myFunction() {
                const input = document.getElementById('searchInput');
                const filter = input.value.toUpperCase();
                const table = document.getElementById("dataTable");
                const tr = table.getElementsByTagName('tr');

                for (let i = 1; i < tr.length; i++) {
                    const td = tr[i].getElementsByTagName('td');
                    let match = false;

                    for (let j = 0; j < td.length; j++) {
                        if (td[j]) {
                            const txtValue = td[j].textContent || td[j].innerText;
                            if (txtValue.toUpperCase().indexOf(filter) > -1) {
                                match = true;
                                break;
                            }
                        }
                    }

                    if (match) {
                        tr[i].style.display = "";
                    } else {
                        tr[i].style.display = "none";
                    }
                }
            }
        });

    </script>
</body>

</html>